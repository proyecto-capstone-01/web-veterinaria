---
import BlogCard from './BlogCard.astro';
import Separator from './Separator.astro';
import { ArrowRight } from 'lucide-react';
import { getBlogPosts } from '../lib/payloadClient';

interface Post {
	publishedAt: string;
}

const { posts } = await getBlogPosts(3);
const SITE_BASE = import.meta.env.SITE || '/';
---

<div>
	<Separator
		title="Publicaciones Recientes"
		description="Lee nuestras Ãºltimas publicaciones"
	/>
	<div class="max-w-6xl mx-auto px-3 py-8">
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
			{posts
			.sort((a: Post, b: Post) => new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime())
			.slice(0, 5)
			.map((post: unknown) => <BlogCard post={post} />)}
		</div>
		<div class="flex justify-center mt-10">
			<a class="inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary-dark transition" href={`${SITE_BASE}blog`}>
				Ver todos los posts
				<ArrowRight size={20} />
			</a>
		</div>
	</div>
</div>
