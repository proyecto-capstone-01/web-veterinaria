---
import Button from "../components/Buttons.astro";

const navItems = [
    { name: "Inicio", url: "/" },
    { name: "Productos", url: "/products" },
    { name: "Blog Educativo", url: "/blog" },
    { name: "Contacto", url: "/contact" },
];

const currentPath = Astro.url.pathname;
---

<nav class="bg-white border-gray-200">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">

        <div class="flex items-center space-x-3">

        <button id="menu-toggle" type="button"
            class="relative w-10 h-10 flex flex-col justify-center items-center md:hidden focus:outline-none">
            <span class="bar top"></span>
            <span class="bar middle"></span>
            <span class="bar bottom"></span>
        </button>

        <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img src="/favicon.png" class="h-12" alt="Logo" />
        </a>
        </div>

        <div id="navbar-cta"
        class="hidden md:flex md:items-center md:justify-center w-full md:w-auto order-3 md:order-2">
        <ul class="flex flex-col md:flex-row font-medium md:p-0 mt-4 rounded-lg 
            md:space-x-8 rtl:space-x-reverse md:mt-0 text-center">
            {navItems.map(item => {
            const isActive = currentPath === item.url;
            return (
                <li class="relative">
                <a
                    href={item.url}
                    class={`block py-2 px-3 md:p-0 rounded-sm transition-colors ${
                    isActive
                        ? "text-white bg-primary md:bg-transparent md:text-primary md:hover:text-primary-dark font-bold"
                        : "text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:hover:text-primary-dark"
                    }`}
                    aria-current={isActive ? "page" : undefined}
                >
                    {item.name}
                </a>
                {isActive && (
                    <span class="hidden md:block absolute left-1/2 -translate-x-1/2 bottom-0 w-4 h-[2px] rounded-full bg-primary"></span>
                )}
                </li>
            );
            })}
        </ul>
        </div>

        <div class="md:order-3">
        <Button text="Agendar visita" url="/toSchedule" variant="primary" />
        </div>
    </div>
</nav>


<script>
    const menuToggle = document.getElementById("menu-toggle");
    const menu = document.getElementById("navbar-cta");

    if (menuToggle && menu) {
            menuToggle.addEventListener("click", () => {
            menu.classList.toggle("hidden");
            menuToggle.classList.toggle("open");
        });
    }

    const links = document.querySelectorAll("nav a[href]");
    const currentPath = window.location.pathname;

    links.forEach(link => {
        if (link.getAttribute("href") === currentPath) {
            link.classList.add("text-primary", "font-bold");
        }
    });
</script>