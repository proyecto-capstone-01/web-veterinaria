---
import Layout from '../../layouts/Layout.astro';
import Button from '../../components/Buttons.astro';

export async function getStaticPaths() {
    const res = await fetch("https://fakestoreapi.com/products");
    const products = await res.json();

    return products.map((product) => ({
        params: { id: String(product.id) },
        props: { product },
    }));
}

interface Product {
    id: number;
    title: string;
    description: string;
    price: number;
    category: string;
    image: string;
}

const { product } = Astro.props as { product: Product };
---

<Layout Title={product.title}>
    <div class="max-w-5xl mx-auto ">
        <Button text="Volver a productos" url="/products" variant="primary" class="mb-4"/>
        
        <div class="py-6 flex flex-col md:flex-row gap-3">
            <img
                src={product.image}
                alt={product.title}
                class="w-full md:w-1/2 h-80 object-contain bg-gray-100 rounded"
                />
            
                <div class="flex-1">
                <h1 class="text-2xl font-bold mb-2">{product.title}</h1>
                <p class="text-gray-700 mb-4">{product.description}</p>
            
                <p class="text-lg font-semibold text-indigo-600 mb-2">
                    ${product.price}
                </p>
                <p class="text-sm text-gray-500">Categor√≠a: {product.category}</p>
            </div>
        </div>
    </div>
</Layout>